<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>

    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">

</head>
<body>
    <div class="wrapperOne">
        <div class="header">
            <div class="left">
                <div>家</div>
                <div>YAYAUDAO</div>
            </div>
            <div class="right">
                <a class="qiehuan" href="en.html">切换语言</a>
                <a href="">
                    <img src="picture/weibo.svg" alt="">
                </a>
                <a href="">
                <img src="picture/discord.svg" alt="">
                </a>
            </div>
        </div>
        
    </div>
    <div class="banner">
        <img src="images/girl.png" alt="">

    </div>
    <div>

        <div class="money">
            <div class="moneybtn">
                <button id="mint_10">Mint 10</button>
                <button id="mint_1">Mint 1</button>


                <button id="eth_requestAccounts">链接钱包</button>

                <button id="mint_5">Mint 5</button>
                <span id="say"> </span>
            </div>
            <div class="price">
                <div class="priceitem">
                    <h2>
                        价格
                    </h2>
                    <p>
                        0.05ETH
                    </p>
                </div>
                <div class="priceitem">
                    <h2>
                        数量
                    </h2>
                    <p>
                        0/2015
                    </p>
                </div>
            </div>


        </div>

    </div>
    <div class="wrapperthree">
        <Div class="wrapperthreecon">

            <div class="left">
                <div>我们的社区</div>
                <h2>全球合作者沟通联盟</h2>
                <div class="content">
                    <p>YayauDAO是一项旨 在颠覆粉丝和明星互动的沟通方式</p>
                    <p>YayauDAO为所有合作者建立沟通</p>
                    <p>我们从一个贴纸包开始，但是我们后续会有更多行动</p>
                    <p>立即加入我们的全球联盟吧</p>
                    <p>我们的核心价值观是：<span>关爱、表达和无限</span></p>
                </div>


            </div>
            <div class="middle">
                <div class="imgContent">
                    <div class="box">
                        <div class="one">
                            <div class="title">1、建立和连接</div>
                            <div class="content">
                                我们相信合作者必须建立连接，而且要
                                快速高效的建立连接。在VayauDAO随
                                时随地的建立连接，想到即连接。
                            </div>
                        </div>
                        <div class="two">
                            <div class="title">2、目的和意义</div>
                            <div class="content">
                                创建YayauDAO的目的：帮助像Yavau
                                这样的创作者能够更专心、更专注于工
                                作，并随时建立跟粉丝和其他合作伙伴
                                的互动。
                            </div>
                        </div>
                        <div class="three">
                            <div class="title">3、粉丝权益</div>
                            <div class="content">
                                Yayau会在全世界任何一个角落，通过
                                YavauDAO随时与你建立连接，准备好
                                与她一起创作吧。
                            </div>
                        </div>
                    </div>

                </div>

            </div>
            <div class="right">
                <div class="imgContent">
                    <div class="box">
                        <div class="one">
                            <div class="title">NFT空投：</div>
                            <div class="content">
                                Yayau会不定期的空投明信片给nft
                                持有者，每一张都是独一无二的。
                                可能是剧组拍摄所想，可能是当天
                                心情，也可能是路边的风景。
                                一切的一切，只是因为想你们了。
                            </div>
                        </div>


                    </div>

                </div>
            </div>
        </Div>
    </div>
    
   
<script>

    var signer;

    function showResult(node, msg) {
        node.text(msg);
    }

    jQuery("#eth_requestAccounts").click(async function () {

        if (typeof window.ethereum == 'undefined') {
            alert('MetaMask is not installed!');
        } else {
            if (window.ethereum.chainId != "0x4") {
                showResult(jQuery("#eth_requestAccounts"), "链接钱包");
                showResult(jQuery("#say") ,"Wrong network, please switch to Ethereum network")
                return;
            }
        }

        const provider = new ethers.providers.Web3Provider(window.ethereum);

        // The MetaMask plugin also allows signing transactions to
        // send ether and pay to change state within the blockchain.
        // For this, you need the account signer...
        signer = provider.getSigner();
        myAddress = await signer.getAddress();
        showResult(jQuery("#eth_requestAccounts"), myAddress);
        showResult(jQuery("#say"), "");

    });

    jQuery("#mint_1").click(async function () {
        let num = 1;
        mint(num);

    });

    jQuery("#mint_5").click(async function () {
        let num = 5;
        mint(num);

    });

    jQuery("#mint_10").click(async function () {
        let num = 10;
        mint(num);

    });


    async function mint(num) {
       
        // The MetaMask plugin also allows signing transactions to
        // send ether and pay to change state within the blockchain.
        // For this, you need the account signer...
        let NFT = '0xE3c99878a89c7786C1FA028Cbf07A526f4333B5E';

        let price = 0.05;

        let funcCode = ethers.utils.hexDataSlice(ethers.utils.id("mint(uint256)"), 0, 4);

        let data = ethers.utils.hexConcat([
            funcCode,
            ethers.utils.hexZeroPad(ethers.utils.hexValue(num), 32),
        ]);
        // ethers.utils.hexZeroPad(WETH, 32),
        // console.log(0x1);
        //let data =  ethers.utils.hexDataSlice(ethers.utils.id("name()"), 0, 4);
        console.log(ethers.utils.hexZeroPad(ethers.utils.hexValue(num), 32));
        //console.log(params1);
        let t = {//签名，发送交易
            to: NFT,//发送至以太坊域名
            data: data,
            value: ethers.utils.parseEther((num*price).toString())
        }


        const tx0 = await signer.sendTransaction(t);

        await tx0.wait();

        console.log(tx0);

    }


</script>
</body>
</html>
